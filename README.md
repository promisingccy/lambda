<style class="fox_global_style"> div.fox_html_content { line-height: 1.5;} /* 一些默认样式 */ blockquote { margin-Top: 0px; margin-Bottom: 0px; margin-Left: 0.5em } ol, ul { margin-Top: 0px; margin-Bottom: 0px; list-style-position: inside; } p { margin-Top: 0px; margin-Bottom: 0px } </style> <div><span id="_FoxCURSOR"></span><span microsoft="" yahei="" ui';="" font-size:="" 14px;="" color:="" rgb(0,="" 0,="" 0);="" background-color:="" rgba(0,="" font-weight:="" normal;="" font-style:="" normal;text-decoration:="" none;'="">#&nbsp;lambda<br>stream&nbsp;lambda&nbsp;usage&nbsp;demos<br><br>#####&nbsp;GetStream<br><br>/*************&nbsp;通过&nbsp;.stream&nbsp;获取&nbsp;*************/<br>String[]&nbsp;strings&nbsp;=&nbsp;{"a",&nbsp;"b",&nbsp;"c"};<br>Stream&lt;String&gt;&nbsp;stream&nbsp;=&nbsp;Arrays.stream(strings);<br><br>/*************&nbsp;通过&nbsp;.stream&nbsp;获取&nbsp;*************/<br>Stream&lt;String&gt;&nbsp;stream1&nbsp;=&nbsp;Stream.of("a",&nbsp;"b",&nbsp;"c");<br><br>/*************&nbsp;stream&nbsp;多线程&nbsp;*************/<br>List&lt;String&gt;&nbsp;list&nbsp;=&nbsp;Arrays.asList("a",&nbsp;"b",&nbsp;"c");<br>//多线程输出&nbsp;顺序不保证&nbsp;&nbsp;b&nbsp;c&nbsp;a<br>list.parallelStream().forEach(e-&gt;&nbsp;System.out.println(e));<br><br>/*************&nbsp;stream&nbsp;与&nbsp;list&nbsp;互转&nbsp;*************/<br>List&lt;String&gt;&nbsp;listFromStream&nbsp;=&nbsp;stream.collect(Collectors.toList());<br>//[a,&nbsp;b,&nbsp;c]<br>System.out.println(listFromStream);<br><br>#####&nbsp;StreamBase<br>/**<br>&nbsp;*&nbsp;stream的三个组成：数据源/中间操作终止操作。<br>&nbsp;*<br>&nbsp;*&nbsp;中间操作是对数据的加工，是lazy操作，<br>&nbsp;*&nbsp;并不会立马启动，而是等待终止操作才会执行!<br>&nbsp;*<br>&nbsp;*&nbsp;@数据源<br>&nbsp;*&nbsp;@中间操作方法：<br>&nbsp;*&nbsp;distinct&nbsp;去重-&gt;new&nbsp;Stream<br>&nbsp;*&nbsp;filter&nbsp;过滤-&gt;new&nbsp;Stream<br>&nbsp;*&nbsp;map&nbsp;再加工-&gt;new&nbsp;Stream<br>&nbsp;*&nbsp;flatMap&nbsp;平铺层级关系-&gt;new&nbsp;Stream<br>&nbsp;*&nbsp;----------------<br>&nbsp;*&nbsp;@终止操作方法：<br>&nbsp;*&nbsp;count&nbsp;计数-&gt;int<br>&nbsp;*&nbsp;anyMatch&nbsp;只要有一个为真&nbsp;则为真-&gt;bool<br>&nbsp;*&nbsp;allMatch&nbsp;全部为真&nbsp;则为真-&gt;bool<br>&nbsp;*&nbsp;noneMatch&nbsp;都不为真&nbsp;则为真-&gt;bool<br>&nbsp;*&nbsp;reduce&nbsp;&nbsp;初始值，遍历算法-&gt;int<br>&nbsp;*&nbsp;collect&nbsp;将stream转为集合<br>&nbsp;*/<br><br>#####&nbsp;LambdaInMap<br>HashMap&lt;String,&nbsp;String&gt;&nbsp;map&nbsp;=&nbsp;new&nbsp;HashMap&lt;&gt;();<br>map.put("jack",&nbsp;"20");<br>map.put("cill",&nbsp;"30");<br>map.put("tide",&nbsp;"20");<br>map.put("jack2",&nbsp;"40");<br><br>List&lt;Object&gt;&nbsp;agesInJack&nbsp;=&nbsp;map.entrySet()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.stream()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.filter(e&nbsp;-&gt;&nbsp;e.getKey().contains("jack"))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.map(Map.Entry::getValue)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.collect(Collectors.toList());<br>//[40,&nbsp;20]<br>System.out.println(agesInJack);<br><br>List&lt;String&gt;&nbsp;namesIn20&nbsp;=&nbsp;map.entrySet()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.stream()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.filter(e&nbsp;-&gt;&nbsp;"20".equals(e.getValue()))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.map(Map.Entry::getKey)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.collect(Collectors.toList());<br>//[tide,&nbsp;jack]<br>System.out.println(namesIn20);<br><br>#####&nbsp;StreamPeek<br>/**<br>&nbsp;*&nbsp;peek主要用于debug&nbsp;输出遍历流程中的数据状态；<br>&nbsp;*&nbsp;如果是基本类型，peek不会改变返回结果；<br>&nbsp;*&nbsp;如果是对象，peek改变了其中属性则会影响返回结果<br>&nbsp;*/<br><br>//&nbsp;filter:three<br>//&nbsp;map:THREE<br>//&nbsp;filter:four<br>//&nbsp;map:FOUR<br>List&lt;String&gt;&nbsp;list&nbsp;=&nbsp;Stream.of("one",&nbsp;"two",&nbsp;"three",&nbsp;"four")<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.filter(e&nbsp;-&gt;&nbsp;e.length()&nbsp;&gt;&nbsp;3)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.peek(e&nbsp;-&gt;&nbsp;System.out.println("filter:"&nbsp;+&nbsp;e))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.map(String::toUpperCase)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.peek(e&nbsp;-&gt;&nbsp;System.out.println("map:"&nbsp;+&nbsp;e))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.collect(Collectors.toList());<br>//[THREE,&nbsp;FOUR]<br>System.out.println(list);<br><br><br>#####&nbsp;StreamCollectUsage<br><br>List&lt;String&gt;&nbsp;list&nbsp;=&nbsp;Arrays.asList("one",&nbsp;"two",&nbsp;"three",&nbsp;"four");<br>List&lt;String&gt;&nbsp;listWithCouple&nbsp;=&nbsp;Arrays.asList("one",&nbsp;"one",&nbsp;"three",&nbsp;"four");<br><br>Map&lt;Boolean,&nbsp;List&lt;String&gt;&gt;&nbsp;lengthWithGroupBy&nbsp;=&nbsp;list.stream().collect(Collectors.partitioningBy(s&nbsp;-&gt;&nbsp;s.length()&nbsp;&gt;&nbsp;3));<br>//{false=[one,&nbsp;two],&nbsp;true=[three,&nbsp;four]}<br>System.out.println(lengthWithGroupBy);<br><br>Map&lt;Integer,&nbsp;Set&lt;String&gt;&gt;&nbsp;collectGroup&nbsp;=&nbsp;list.stream().collect(Collectors.groupingBy(String::length,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Collectors.toSet()));<br>//{3=[one,&nbsp;two],&nbsp;4=[four],&nbsp;5=[three]}<br>System.out.println(collectGroup);<br><br>IntSummaryStatistics&nbsp;lengthRes&nbsp;=&nbsp;list.stream().collect(Collectors.summarizingInt(String::length));<br>//IntSummaryStatistics{count=4,&nbsp;sum=15,&nbsp;min=3,&nbsp;average=3.750000,&nbsp;max=5}<br>System.out.println(lengthRes);<br><br>String&nbsp;joinStr&nbsp;=&nbsp;list.stream().collect(Collectors.joining("&nbsp;","ccy_","_ccy"));<br>//ccy_one&nbsp;two&nbsp;three&nbsp;four_ccy<br>System.out.println(joinStr);<br><br>ArrayList&lt;String&gt;&nbsp;newCollectList&nbsp;=&nbsp;list.stream().collect(Collectors.collectingAndThen(Collectors.toList(),&nbsp;l&nbsp;-&gt;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;new&nbsp;ArrayList&lt;&gt;(l);<br>}));<br>System.out.println(newCollectList);<br><br>Map&lt;String,&nbsp;Integer&gt;&nbsp;collect&nbsp;=&nbsp;listWithCouple.stream().collect(Collectors.toMap(Function.identity(),&nbsp;String::length,&nbsp;(a,&nbsp;b)&nbsp;-&gt;&nbsp;a));<br>//{four=4,&nbsp;one=3,&nbsp;three=5}<br>System.out.println(collect);<br><br>Map&lt;String,&nbsp;Integer&gt;&nbsp;mapFromStream&nbsp;=&nbsp;list.stream().collect(Collectors.toMap(Function.identity(),&nbsp;String::length));<br>//{four=4,&nbsp;one=3,&nbsp;three=5,&nbsp;two=3}<br>System.out.println(mapFromStream);<br><br>Set&lt;String&gt;&nbsp;setFromStream&nbsp;=<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;listWithCouple.stream().map(String::toUpperCase).collect(Collectors.toCollection(TreeSet::new));<br>//[FOUR,&nbsp;ONE,&nbsp;THREE]<br>System.out.println(setFromStream);<br><br>Set&lt;String&gt;&nbsp;setFromStream&nbsp;=&nbsp;listWithCouple.stream().map(String::toUpperCase).collect(Collectors.toSet());<br>//[ONE,&nbsp;FOUR,&nbsp;THREE]<br>System.out.println(setFromStream);<br><br>List&lt;String&gt;&nbsp;listFromStream&nbsp;=&nbsp;list.stream().map(String::toUpperCase).collect(Collectors.toList());<br>//[ONE,&nbsp;TWO,&nbsp;THREE,&nbsp;FOUR]<br>System.out.println(listFromStream);<br><br></span></div> <div><br></div>
